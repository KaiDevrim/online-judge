[uwsgi]
# Socket configuration
socket = 0.0.0.0:8000
protocol = uwsgi

# Process management
master = true
processes = 4
threads = 2
enable-threads = true

# Application settings
chdir = /site
pythonpath = /site
wsgi-file = dmoj/wsgi.py
env = DJANGO_SETTINGS_MODULE=dmoj.settings
module = dmoj.wsgi:application

# Performance
optimize = 2
memory-report = true

# Scaling settings
cheaper-algo = backlog
cheaper = 2
cheaper-initial = 4
cheaper-step = 1
workers = 7

# Limits
max-requests = 5000
harakiri = 60
post-buffering = 4096
buffer-size = 65535

# Logging
logto = /tmp/uwsgi.log
disable-logging = false
log-4xx = true
log-5xx = true
